<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./css/mycar.css">
    <link rel="stylesheet" href="./css/bootstrap.css">
    <script type="text/javascript" src="./js/jquery.min.js"></script>
	<script type="text/javascript" src="./js/popper.min.js"></script>
	<script type="text/javascript" src="./js/bootstrap.min.js"></script>
    <title>购物车页面</title>
</head>
<body>
    <div class="container">
        <div id="header">
             <ul class="breadcrumb m-0 p-0">
                <li class="breadcrumb-item">
                        <a href="javascript:skiplogin()">
                         用户登录
                        <div id="login_bg"></div>
                    </a>
                </li>
                <li class="breadcrumb-item">
                    <a href="userreg.html">
                        用户注册
                        <div id="reg_bg"></div>
                    </a>
                </li>
                <li class="breadcrumb-item">
                    <a href="">
                        我的购物车
                        <div id="shop_bg"></div>
                    </a>
                </li>
                <li class="breadcrumb-item">
                <a href="">
                        我的收藏
                        <div id="care_bg"></div>
                    </a>
                    </li>
                <li class="breadcrumb-item">
                    <a href="javascript:skipuserlist()">
                        用户中心
                        <div id="user_bg"></div>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="top_nav p-3 mt-4">
        <ul class="list-unstyled text-white d-flex">
            <li class="h3">大超市购物车</li>
            <li class="ml-5 mt-2">首页</li>
            <li class="ml-5 mt-2">账户设置</li>
            <li class="ml-5 mt-2">评价</li>
            <li class="ml-5 mt-2">消息</li>
            <li><input type="text" placeholder="搜索商品" class="nav_input mt-2"></li>
        </ul>
    </div>
    <div class="container mt-5">
        <div id="list">
            <div>
                <p class="h4 text-danger">全部商品</p><span></span>
            </div>
            <div class="nav_car">
                <input type="checkbox">全选
                <span>商品</span>
                <span>单价</span>
                <span>数量</span>
                <span>小计</span>
                <span>操作</span>
            </div>
            <div class="mt-3 ml-3">
                <input type="checkbox">
                <span>华为自营店</span>
            </div>
            <div class="car_list mt-2">
                <div class="row m-0">
                    <div class="col-6 p-0">
                        <div class="d-flex p-3 pl-2">
                            <input type="checkbox" class="mt-3">
                            <div class="d-flex">
                                <img src="./image/pro_phone.jpg" alt="">
                                <p class="mt-2 text-muted">华为 HUAWEI P30 Pro 超感光徕卡四摄10倍混合变焦麒麟980芯片屏内指纹 8GB+128GB赤茶橘全网通版双4G手机</p>
                            </div>
                        </div> 
                    </div>
                    <div class="col-6 p-0">
                        <div class="p-4 d-flex">
                            <p class="ml-3 price_color">￥5299.00</p>
                            <div class="ml-5 list_width">
                                <button class="btn_list btn_rela1">-</button>
                                <input type="text" class="input_list" value="1">
                                <button class="btn_list btn_rela2">+</button>                               
                            </div>
                            <p class="price_color ml-1" style="width:80px;">￥5299.00</p>
                            <div class="ml-4">
                                <p class="font_small">移动到我的关注</p>
                                <p class="font_small">删除</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-3 ml-3">
                <input type="checkbox">
                <span>荣耀自营店</span>
            </div>
            <div class="car_list mt-2">
                <div class="row m-0">
                    <div class="col-6 p-0">
                        <div class="d-flex p-3">
                            <input type="checkbox" class="mt-3">
                            <div class="d-flex">
                                <img src="./image/pro_1.jpg" alt="">
                                <p class="mt-2 text-muted">荣耀MagicBook 2019 14英寸轻薄窄边框笔记本电脑（AMD锐龙5 3500U 8G 512G FHD IPS 指纹解锁）冰河银 【618年中盛</p>
                            </div>
                        </div> 
                    </div>
                    <div class="col-6 p-0">
                        <div class="p-3 d-flex">
                            <p class="ml-4 price_color">￥4299.00</p>
                            <div class="ml-5 list_width">
                                <button class="btn_list btn_rela1">-</button>
                                <input type="text" class="input_list" value="1">
                                <button class="btn_list btn_rela2">+</button>                               
                            </div>
                            <p class="price_color ml-1" style="width:80px;">￥4299.00</p>
                            <div class="ml-4">
                                <p class="font_small">移动到我的关注</p>
                                <p class="font_small">删除</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-3 ml-3">
                <input type="checkbox">
                <span>荣耀自营店</span>
            </div>
            <div class="car_list mt-2">
                <div class="row m-0">
                    <div class="col-6 p-0">
                        <div class="d-flex p-3">
                            <input type="checkbox" class="mt-3">
                            <div class="d-flex">
                                <img src="./image/pro_1.jpg" alt="">
                                <p class="mt-2 text-muted">荣耀MagicBook 2019 14英寸轻薄窄边框笔记本电脑（AMD锐龙5 3500U 8G 512G FHD IPS 指纹解锁）冰河银 【618年中盛</p>
                            </div>
                        </div> 
                    </div>
                    <div class="col-6 p-0">
                        <div class="p-3 d-flex">
                            <p class="ml-4 price_color">￥4299.00</p>
                            <div class="ml-5 list_width">
                                <button class="btn_list btn_rela1">-</button>
                                <input type="text" class="input_list" value="1">
                                <button class="btn_list btn_rela2">+</button>                               
                            </div>
                            <p class="price_color ml-1" style="width:80px;">￥4299.00</p>
                            <div class="ml-4">
                                <p class="font_small">移动到我的关注</p>
                                <p class="font_small">删除</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-3 ml-3">
                    <input type="checkbox">
                    <span>荣耀自营店</span>
                </div>
                <div class="car_list mt-2">
                    <div class="row m-0">
                        <div class="col-6 p-0">
                            <div class="d-flex p-3">
                                <input type="checkbox" class="mt-3">
                                <div class="d-flex">
                                    <img src="./image/pro_1.jpg" alt="">
                                    <p class="mt-2 text-muted">荣耀MagicBook 2019 14英寸轻薄窄边框笔记本电脑（AMD锐龙5 3500U 8G 512G FHD IPS 指纹解锁）冰河银 【618年中盛</p>
                                </div>
                            </div> 
                        </div>
                        <div class="col-6 p-0">
                            <div class="p-3 d-flex">
                                <p class="ml-4 price_color">￥4299.00</p>
                                <div class="ml-5 list_width">
                                    <button class="btn_list btn_rela1">-</button>
                                    <input type="text" class="input_list" value="1">
                                    <button class="btn_list btn_rela2">+</button>                               
                                </div>
                                <p class="price_color ml-1" style="width:80px;">￥4299.00</p>
                                <div class="ml-4">
                                    <p class="font_small">移动到我的关注</p>
                                    <p class="font_small">删除</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            <div class="car_cal mt-4 d-flex justify-content-between">
                <div class="d-flex ml-3">
                    <div class="input_move">
                        <input type="checkbox"> 
                    </div>
                    <div>
                        <span class="font_small ml-2">全选</span>
                        <span><a href="" class="text-muted font_small ml-2">删除选中商品</a></span>
                        <span><a href="" class="text-muted font_small ml-2">移到关注</a></span>
                        <span><a href="" class="text-muted font_small ml-2">清理购物车</a></span>
                    </div>
                </div>
                <div class="d-flex">
                    <p class="font_small mr-3">已选择&nbsp;<span class="text-danger">0</span>&nbsp;件商品</p>
                    <p class="text-muted mr-3">总价：<span class="text-danger font-weight-bold"></span></p>
                    <a href="" class="a_count">去&nbsp;结&nbsp;算</a>
                </div>
            </div>
            <br><br><br><br><br><br><br>
        </div>
    </div>
<script>
                //计算默认总价
                //获取每个保存小计的元素 
                var div=document.getElementById("list");
                var price_1=div.querySelectorAll(".car_list p.price_color.ml-1")
                //遍历获取到的集合并将总价累加到变量中
                var subtotal=0;
                for(var price of price_1){
                    subtotal+=parseFloat(price.innerHTML.slice(1));
                }
                //获取保存总价的元素
                var div=document.getElementsByClassName("car_cal");
                var count_price=div[0].querySelector("div:last-child p.text-muted span");
                //计算总价
                count_price.innerHTML=`￥${subtotal.toFixed(2)}`;



    //获取能够找到button的父元素集合
    var divs=document.getElementsByClassName("list_width");
    //遍历集合
    for(var i=0;i<divs.length;i++){
        //通过遍历到的每个元素作为寻找button的父元素
        var btns=divs[i].getElementsByTagName("button");
        //遍历获取的button集合，获取每个button元素
        for(var btn of btns){
            //为每个button绑定事件
            btn.onclick=function(){
                var btn=this;
                //获取两个按钮中间inpu的元素
                var input=btn.parentNode.children[1];
                //将input中value的值转为数值
                var num=Number(input.value);
                //判断如果点击+号，则num的值加1；否则减1
                if(btn.innerHTML=="+"){
                    num++;
                }else if(num>1){  //判断当num的值大于1时，可以减1，等于或者小于1时，则不能执行减1；
                    num--;
                }
                //将执行完的num在赋值给input.value
                input.value=num;
                /*计算小计*/
                //获取能够找到单价的父元素集合
                var div_1=btn.parentNode.parentNode;
                //将单价转为数值
                var price=parseFloat(div_1.children[0].innerHTML.slice(1));
                div_1.children[2].innerHTML=`￥${(price*num).toFixed(2)}`;
                //计算总价
                //获取每个保存小计的元素          
                var div=document.getElementById("list");
                var price_1=div.querySelectorAll(".car_list p.price_color.ml-1")
                //遍历获取到的集合并将总价累加到变量中
                var subtotal=0;
                for(var price of price_1){
                    subtotal+=parseFloat(price.innerHTML.slice(1));
                }
                //获取保存总价的元素
                var div=document.getElementsByClassName("car_cal");
                var count_price=div[0].querySelector("div:last-child p.text-muted span");
                //计算总价
                count_price.innerHTML=`￥${subtotal.toFixed(2)}`;
            };
        };
    };
</script>
</body>
</html>